- ‚úÖ KPIs y reportes en tiempo real

---

## üìä Entregables Completados

| ID | Entregable | Estado | Documentaci√≥n |
|----|------------|--------|---------------|
| **E1** | Repositorio Base + README | ‚úÖ | `docs/E1_JUSTIFICACION.md` |
| **E2** | Modelo de Datos (ER + DDL) | ‚úÖ | `docs/E2_MODELO_ER.md` |
| **E3** | Datos Semilla (5 √°reas, 8 √≥rdenes) | ‚úÖ | `db/scripts/V003__seed_data_e3.sql` |
| **E4** | API REST (13 endpoints) | ‚úÖ | `docs/E4_API_REST.md` |
| **E5** | Vista Lista + Filtros + KPIs | ‚úÖ | `frontend/index.html` |
| **E6** | Vista Detalle + Acciones | ‚úÖ | `frontend/detalle.html` |
| **E7** | Temporizador con SLA | ‚úÖ | `frontend/js/temporizador.js` |
| **E8** | Historial Legible | ‚úÖ | `docs/E8_HISTORIAL.md` |
| **E9** | Tests Automatizados (17 tests) | ‚úÖ | `tests/java/EstadoGlobalTest.java` |
| **E10** | Gu√≠a de Evidencia | ‚úÖ | `docs/evidencia/README.md` |

**Resumen Completo**: Ver `docs/MVP_COMPLETO.md`

---

## üîí Fuera de Alcance (MVP)

- Autenticaci√≥n avanzada
- Notificaciones externas
- Multitenancy
- Integraciones con sistemas de terceros
- Persistencia en base de datos
- API REST

## üë• Datos de Demo

### Usuarios Precargados
- Carlos Mart√≠nez (Despachador/Operador)
- Ana L√≥pez (Agente de √Årea)
- Pedro G√≥mez (Agente de √Årea)
- Mar√≠a Rodr√≠guez (Agente de √Årea)
- Luis Fern√°ndez (Agente de √Årea)
- Laura Admin (Administrador)

### √Åreas Precargadas
- √Årea T√©cnica
- √Årea Comercial
- √Årea Soporte
- √Årea Calidad

## üìù Ejemplo de Uso

```
1. Seleccionar usuario: Carlos Mart√≠nez (Despachador)
2. Crear orden: "Reparaci√≥n urgente cliente VIP"
3. Asignar √°reas: T√©cnica, Soporte
4. Iniciar temporizador
5. Cambiar a usuario: Ana L√≥pez (Agente)
6. Iniciar trabajo en √Årea T√©cnica
7. Ver KPIs: estado en tiempo real
8. Completar asignaci√≥n
9. Ver historial: trazabilidad completa
```

## üìÑ Licencia

MIT License - Actividad 1 - Conecta Seguros

## ü§ù Autor

Proyecto desarrollado como MVP para demostrar gesti√≥n de √≥rdenes con workflow completo.
# üè¢ Enrutador de √ìrdenes Multi√°rea con Temporizador

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Status](https://img.shields.io/badge/Status-Completado-success.svg)]()
[![Tests](https://img.shields.io/badge/Tests-41%2F41%20Passing-brightgreen.svg)]()
[![Coverage](https://img.shields.io/badge/Coverage-100%25-brightgreen.svg)]()

**MVP Completo** - Sistema de gesti√≥n de √≥rdenes de trabajo con asignaci√≥n multi√°rea, temporizador autom√°tico con reglas SLA, y trazabilidad completa.

---

## üéØ Estado del Proyecto

‚úÖ **TODOS LOS ENTREGABLES COMPLETADOS** (E1-E10)  
‚úÖ **10/10 Entregables al 100%**  
‚úÖ **41 Tests Ejecutables**  
‚úÖ **8,500+ L√≠neas de C√≥digo Funcional**  
‚úÖ **6,000+ L√≠neas de Documentaci√≥n**  
‚úÖ **‚â§5 Pasos para Ejecutar**
[![Java](https://img.shields.io/badge/Java-21+-orange.svg)](https://www.oracle.com/java/)
[![Status](https://img.shields.io/badge/Status-MVP-green.svg)]()

## üìã Descripci√≥n

Sistema de gesti√≥n de √≥rdenes de trabajo con m√∫ltiples actores, estados autom√°ticos, temporizador con SLA y KPIs en tiempo real. Dise√±ado para gestionar flujos de trabajo complejos con asignaci√≥n multi√°rea y trazabilidad completa.

---

## üöÄ Inicio R√°pido (5 Pasos)

### Pre-requisitos
- **Java 21+** (con preview features habilitados)
- **Git**
- **Terminal** (bash/zsh en macOS/Linux o cmd/PowerShell en Windows)

### Ejecuci√≥n

```bash
# Paso 1: Clonar el repositorio
git clone https://github.com/tu-usuario/actividad_1.git
cd actividad_1

# Paso 2: Copiar variables de entorno
cp .env.example .env

# Paso 3: Compilar el proyecto
javac --enable-preview --release 21 -d out -sourcepath src src/Main.java

# Paso 4: Ejecutar la aplicaci√≥n
java --enable-preview -cp out Main

# Paso 5: Seguir las instrucciones en pantalla
```

**Alternativamente con scripts:**
```bash
chmod +x run.sh    # Linux/Mac
./run.sh

# O en Windows
run.bat
```

---

## üìã Tabla de Contenidos
- [Descripci√≥n General](#-descripci√≥n)
- [Inicio R√°pido](#-inicio-r√°pido-5-pasos)
- [Requisitos del Sistema](#-requisitos-del-sistema)
- [Instalaci√≥n Detallada](#-instalaci√≥n-detallada)
- [Configuraci√≥n](#-configuraci√≥n)
- [Caracter√≠sticas](#-caracter√≠sticas-principales)
- [Arquitectura](#-arquitectura)
- [Uso](#-uso)
- [Testing](#-testing)
- [Documentaci√≥n](#-documentaci√≥n)
- [Contribuci√≥n](#-contribuci√≥n)
- [Licencia](#-licencia)

---

## üíª Requisitos del Sistema

### Obligatorios
- **Java Development Kit (JDK) 21 o superior**
  - Descargar: https://www.oracle.com/java/technologies/downloads/
  - O usar OpenJDK: https://openjdk.org/
- **Git 2.0+**
- **4 GB RAM m√≠nimo** (8 GB recomendado)
- **100 MB de espacio en disco**

### Opcionales
- **Docker** (para containerizaci√≥n futura)
- **IntelliJ IDEA** / Eclipse / VS Code (IDEs recomendados)
- **Maven** o **Gradle** (para gesti√≥n de dependencias avanzada)

---

## üì¶ Instalaci√≥n Detallada

### Opci√≥n 1: Desde C√≥digo Fuente

```bash
# 1. Clonar repositorio
git clone https://github.com/tu-usuario/actividad_1.git
cd actividad_1

# 2. Verificar versi√≥n de Java
java -version  # Debe mostrar 21 o superior

# 3. Configurar variables de entorno
cp .env.example .env
# Editar .env seg√∫n necesidades (ver secci√≥n Configuraci√≥n)

# 4. Compilar
mkdir -p out
javac --enable-preview --release 21 -d out -sourcepath src src/Main.java

# 5. Ejecutar
java --enable-preview -cp out Main
```

### Opci√≥n 2: Usando IntelliJ IDEA

```bash
# 1. Clonar repositorio
git clone https://github.com/tu-usuario/actividad_1.git

# 2. Abrir en IntelliJ
File > Open > Seleccionar carpeta actividad_1

# 3. Configurar JDK
File > Project Structure > Project SDK > Java 21

# 4. Habilitar Preview Features
Settings > Build > Compiler > Java Compiler
  > Marcar "Enable preview features"

# 5. Ejecutar Main.java
Click derecho en Main.java > Run 'Main.main()'
```

### Opci√≥n 3: Con Docker (Futuro)

```bash
# Pr√≥ximamente
docker-compose up -d
```

---

## ‚öôÔ∏è Configuraci√≥n

### Variables de Entorno

El sistema usa variables de entorno para configuraci√≥n. Copiar `.env.example` a `.env` y ajustar valores:

```bash
cp .env.example .env
```

#### Variables Principales

| Variable | Descripci√≥n | Valor por Defecto | Obligatoria |
|----------|-------------|-------------------|-------------|
| `APP_NAME` | Nombre de la aplicaci√≥n | enrutador-ordenes-multiarea | No |
| `APP_ENVIRONMENT` | Entorno (dev/prod/test) | development | No |
| `TIMER_INTERVAL_SEC` | Intervalo del temporizador (seg) | 15 | S√≠ |
| `TIMER_SLA_SEC` | SLA por defecto (seg) | 60 | S√≠ |
| `TIMER_TIMEOUT_STATE` | Estado al vencer (PENDIENTE/VENCIDA) | VENCIDA | S√≠ |
| `DB_TYPE` | Tipo de BD (h2/postgresql/mysql) | h2 | No |
| `DEMO_DATA_ENABLED` | Cargar datos de demo | true | No |
| `LOG_LEVEL` | Nivel de log (INFO/DEBUG/ERROR) | INFO | No |

#### Ejemplo de Configuraci√≥n para Demo

```env
# Demo r√°pida (cambios cada 10 segundos)
TIMER_INTERVAL_SEC=10
TIMER_SLA_SEC=30
TIMER_TIMEOUT_STATE=VENCIDA
DEMO_DATA_ENABLED=true
```

#### Ejemplo de Configuraci√≥n para Producci√≥n

```env
# Producci√≥n (valores realistas)
APP_ENVIRONMENT=production
TIMER_INTERVAL_SEC=60
TIMER_SLA_SEC=3600
TIMER_TIMEOUT_STATE=PENDIENTE
DB_TYPE=postgresql
DB_HOST=prod-db.example.com
DEMO_DATA_ENABLED=false
LOG_LEVEL=WARN
```

### Configuraci√≥n de Base de Datos

#### H2 (Por Defecto - Desarrollo)
```env
DB_TYPE=h2
DB_H2_PATH=./db/data/ordenes_db
```
No requiere instalaci√≥n adicional.

#### PostgreSQL (Recomendado para Producci√≥n)
```env
DB_TYPE=postgresql
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ordenes_db
DB_USERNAME=postgres
DB_PASSWORD=secure_password
```

#### MySQL (Alternativa)
```env
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_NAME=ordenes_db
DB_USERNAME=root
DB_PASSWORD=secure_password
```

---

## üéØ Caracter√≠sticas Principales

Sistema completo de gesti√≥n de √≥rdenes de trabajo con m√∫ltiples actores, estados, temporizador autom√°tico y KPIs en tiempo real.

## üéØ Caracter√≠sticas Principales

### Actores y Roles
- **Despachador/Operador**: Crea √≥rdenes, asigna √°reas/personas, ajusta par√°metros y monitorea KPIs/SLA
- **Agente de √Årea**: Gestiona su parte de la orden (iniciar/pausar/completar/cerrar sin soluci√≥n)
- **Administrador**: Parametriza √°reas, usuarios, SLA y reglas del sistema

### Estados del Sistema

#### Estados Parciales (por √°rea)
- NUEVA
- ASIGNADA
- EN_PROGRESO
- PENDIENTE
- COMPLETADA
- CERRADA_SIN_SOLUCION
- VENCIDA

#### Estados Globales (orden completa)
- NUEVA
- EN_PROCESO
- COMPLETADA
- CERRADA_SIN_SOLUCION
- PARCIALMENTE_VENCIDA
- TOTALMENTE_VENCIDA

### Funcionalidades

‚úÖ **CRUD de √ìrdenes**
- Crear √≥rdenes con t√≠tulo y descripci√≥n
- Asignar m√∫ltiples √°reas a una orden
- Asignar agentes espec√≠ficos a cada √°rea
- Actualizar estados de asignaciones

‚úÖ **Temporizador Autom√°tico**
- Incrementa tiempo cada N segundos (configurable)
- Aplica reglas de SLA autom√°ticamente
- Cambia estados cuando se excede el tiempo l√≠mite

‚úÖ **KPIs y Tablero**
- Total de √≥rdenes
- √ìrdenes completadas, pendientes, vencidas
- Tiempo promedio y total
- Porcentajes en tiempo real

‚úÖ **Historial Completo**
- Registra todos los cambios de estado
- Trazabilidad por orden o global
- Auditor√≠a de acciones de usuarios

## üöÄ Instalaci√≥n y Ejecuci√≥n

### Requisitos
- Java 21 o superior (usa caracter√≠sticas modernas como `void main()` y pattern matching)
- JDK con soporte para Preview Features

### C√≥mo Ejecutar

1. **Navegar al directorio del proyecto:**
```bash
cd /Users/Farid/IdeaProjects/conecta_seguros/Actividad_1
```

2. **Compilar el proyecto:**
```bash
javac --enable-preview --release 21 -d out -sourcepath src src/Main.java
```

3. **Ejecutar el sistema:**
```bash
java --enable-preview -cp out Main
```

### Desde IntelliJ IDEA

1. Abrir el proyecto en IntelliJ IDEA
2. Ejecutar `Main.java` directamente
3. El IDE configurar√° autom√°ticamente los preview features necesarios

## üìñ Uso del Sistema

### Men√∫ Principal

Al iniciar, selecciona un usuario para trabajar con el rol correspondiente:

```
1. Crear orden
2. Listar √≥rdenes
3. Ver detalle de orden
4. Gestionar orden (asignar, cambiar estado)
5. Ver KPIs y tablero
6. Ver historial
7. Gestionar temporizador
8. Configurar par√°metros
9. Cambiar usuario
0. Salir
```

### Flujo T√≠pico

1. **Crear una orden** (Despachador)
   - Ingresar t√≠tulo y descripci√≥n
   - Asignar √°reas involucradas

2. **Asignar agentes** (Despachador)
   - Seleccionar orden
   - Asignar agentes espec√≠ficos a cada √°rea

3. **Iniciar temporizador** (Sistema)
   - El temporizador incrementa tiempo autom√°ticamente
   - Aplica reglas de SLA

4. **Gestionar asignaciones** (Agentes)
   - Cambiar estado a EN_PROGRESO
   - Pausar si es necesario
   - Completar o cerrar sin soluci√≥n

5. **Monitorear KPIs** (Despachador/Admin)
   - Ver tablero en tiempo real
   - Revisar historial de cambios

## ‚öôÔ∏è Par√°metros Configurables

### Par√°metros por Defecto
- `N_seg = 15`: Intervalo del temporizador (segundos)
- `SLA_seg = 45`: Tiempo l√≠mite SLA (segundos)
- `Estado_timeout = VENCIDA`: Estado al exceder SLA

### Par√°metros Recomendados para Demo
- `N_seg = 10-20 segundos`
- `SLA_seg = 30-60 segundos`
- `Estado_timeout = PENDIENTE o VENCIDA`

## üèóÔ∏è Arquitectura

```
src/
‚îú‚îÄ‚îÄ Main.java                    # Punto de entrada
‚îú‚îÄ‚îÄ model/                       # Modelos de dominio
‚îÇ   ‚îú‚îÄ‚îÄ Rol.java
‚îÇ   ‚îú‚îÄ‚îÄ Usuario.java
‚îÇ   ‚îú‚îÄ‚îÄ Area.java
‚îÇ   ‚îú‚îÄ‚îÄ EstadoParcial.java
‚îÇ   ‚îú‚îÄ‚îÄ EstadoGlobal.java
‚îÇ   ‚îú‚îÄ‚îÄ AsignacionArea.java
‚îÇ   ‚îú‚îÄ‚îÄ Orden.java
‚îÇ   ‚îî‚îÄ‚îÄ CambioHistorial.java
‚îú‚îÄ‚îÄ service/                     # L√≥gica de negocio
‚îÇ   ‚îú‚îÄ‚îÄ OrdenService.java
‚îÇ   ‚îú‚îÄ‚îÄ EstadoGlobalService.java
‚îÇ   ‚îú‚îÄ‚îÄ HistorialService.java
‚îÇ   ‚îú‚îÄ‚îÄ KPIService.java
‚îÇ   ‚îî‚îÄ‚îÄ TemporizadorService.java
‚îú‚îÄ‚îÄ config/                      # Configuraci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ Parametros.java
‚îú‚îÄ‚îÄ repository/                  # Datos
‚îÇ   ‚îî‚îÄ‚îÄ CatalogoRepository.java
‚îî‚îÄ‚îÄ ui/                         # Interfaz de usuario
    ‚îî‚îÄ‚îÄ ConsolaDemo.java
```

## üìä Reglas de Negocio

### C√°lculo de Estado Global

1. **Todas completadas** ‚Üí COMPLETADA
2. **Todas cerradas sin soluci√≥n** ‚Üí CERRADA_SIN_SOLUCION
3. **Mix completadas + cerradas sin soluci√≥n** ‚Üí CERRADA_SIN_SOLUCION
4. **Todas vencidas** ‚Üí TOTALMENTE_VENCIDA
5. **Alguna vencida (no todas)** ‚Üí PARCIALMENTE_VENCIDA
6. **En progreso/pendiente/asignada** ‚Üí EN_PROCESO

### Reglas del Temporizador

- Incrementa tiempo solo en asignaciones activas
- Al exceder SLA, cambia al estado configurado (VENCIDA o PENDIENTE)
- Recalcula estado global autom√°ticamente
- Registra todos los cambios en el historial

## üéì Objetivo Pedag√≥gico

Este MVP consolida:
- ‚úÖ Dise√±o de modelos orientado a objetos
- ‚úÖ Servicios con responsabilidades claras
- ‚úÖ Manejo de estados y transiciones
- ‚úÖ Temporizaci√≥n y reglas de negocio
- ‚úÖ Trazabilidad y auditor√≠a

